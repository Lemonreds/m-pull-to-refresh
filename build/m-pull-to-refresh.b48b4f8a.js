/*! For license information please see m-pull-to-refresh.b48b4f8a.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var s="object"==typeof exports?t(require("react")):t(e.React);for(var r in s)("object"==typeof exports?exports:e)[r]=s[r]}}(self,(function(e){return(()=>{var t={691:(e,t)=>{var s;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var o=typeof s;if("string"===o||"number"===o)e.push(s);else if(Array.isArray(s)){if(s.length){var i=n.apply(null,s);i&&e.push(i)}}else if("object"===o)if(s.toString===Object.prototype.toString)for(var a in s)r.call(s,a)&&s[a]&&e.push(a);else e.push(s.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},985:(e,t,s)=>{"use strict";var r=s(514);function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,t,s,n,o,i){if(i!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var s={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return s.PropTypes=s,s}},712:(e,t,s)=>{e.exports=s(985)()},514:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},698:t=>{"use strict";t.exports=e}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var o=s[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";r.d(n,{default:()=>x});var e=r(698),t=r.n(e),s=r(691),o=r.n(s),i=r(712),a=r.n(i);const h="init",c="loading",l="init",u="pulling",p="loosing",d="loading",f="finish",m=e=>{const{status:s}=e;let r=null;switch(s){case l:case u:r=t().createElement("span",null,"下拉可以刷新");break;case d:r=t().createElement("span",null,"加载中...");break;case p:r=t().createElement("span",null,"松开可以刷新");break;case f:r=t().createElement("span",null,"刷新完成")}return t().createElement("div",{className:"rheader"},r)},y=(e,t)=>{const{status:s}=e;return s===t.status},v=(0,e.memo)(m,y),b=e=>{const{status:s,hasMore:r}=e;let n=null;if(r)switch(s){case h:n=t().createElement("span",null,"上拉加载更多");break;case c:n=t().createElement("span",null,"加载中....")}else n=t().createElement("span",null);return t().createElement("div",{className:"rfooter"},n)},E=(e,t)=>{const{status:s,hasMore:r}=e;return s===t.status&&r===t.hasMore},T=(0,e.memo)(b,E);class g extends t().Component{shouldComponentUpdate(e){return e.shouldUpdate}render(){const{render:e}=this.props;return t().createElement("div",null,e())}}const M=g;function R(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class S extends t().Component{constructor(){super(...arguments),R(this,"wrapRef",void 0),R(this,"bodyRef",void 0),R(this,"startX",0),R(this,"startY",0),R(this,"diffX",0),R(this,"diffY",0),R(this,"events",void 0),R(this,"state",{ptRfresh:l,duration:0,dy:0,ptMore:h}),R(this,"init",(()=>{const{loadMore:e}=this.props,t=this.wrapRef;e&&(this.events={scroll:this.onScroll},Object.keys(this.events).forEach((e=>{const s=this.events[e];t.addEventListener(e,s)})))})),R(this,"destroy",(()=>{const e=this.wrapRef;Object.keys(this.events).forEach((t=>{const s=this.events[t];e.removeEventListener(t,s)}))})),R(this,"onScroll",(e=>{const{hasMore:t}=this.props,{ptMore:s}=this.state;if(!t||s===c)return;const{distanceToLoadMore:r}=this.props,{scrollTop:n,scrollHeight:o,clientHeight:i}=e.target;n+i>=o-r&&this.invokeLoadMore()})),R(this,"invokeLoadMore",(()=>{const{loadMore:e,hasMore:t}=this.props;e&&t?(this.setState({ptMore:c}),e().then((()=>{this.setState({ptMore:h})}))):this.setState({ptMore:h})})),R(this,"invokeRefresh",(()=>{const{headerHeight:e,stayTime:t,refresh:s}=this.props;s().then((()=>{this.setStatus(e,f),setTimeout((()=>{this.setStatus(0)}),t)}))})),R(this,"canRefresh",(()=>{const{ptRfresh:e}=this.state;return e!==d&&e!==f})),R(this,"isEdge",(()=>0===this.wrapRef.scrollTop)),R(this,"onTouchStart",(e=>{if(this.canRefresh()&&this.isEdge()){const{clientX:t,clientY:s}=e.touches[0];this.setState({duration:0}),this.startX=t,this.startY=s,this.diffX=0,this.diffY=0}})),R(this,"onTouchMove",(e=>{if(!this.canRefresh())return;const t=this.isEdge(),{clientX:s,clientY:r}=e.touches[0];t||(this.startX=s,this.startY=r),this.diffX=s-this.startX,this.diffY=r-this.startY,t&&this.diffY&&(this.setStatus(this.easing()),e.preventDefault())})),R(this,"onTouchEnd",(()=>{if(this.canRefresh()&&this.isEdge()&&this.diffY){const{duration:e,headerHeight:t}=this.props,{ptRfresh:s}=this.state;s===p?(this.setStatus(t,d),this.invokeRefresh()):this.setStatus(0),this.setState({duration:e})}})),R(this,"setStatus",((e,t)=>{const{distanceToRefresh:s}=this.props;let r=t;r||(r=0===e?l:e<s?u:p),this.setState({ptRfresh:r,dy:e})})),R(this,"easing",(()=>{const{distanceToRefresh:e}=this.props;let t=this.diffY;return t>e&&(t=t<2*e?e+(t-e)/2:1.5*e+(t-2*e)/4),Math.round(t)}))}componentDidMount(){this.init()}shouldComponentUpdate(e){const{children:t}=this.props;return this.shouldUpdateChildren=t!==e.children,!0}componentWillUnmount(){this.destroy()}render(){const{className:e,children:s,style:r,headerHeight:n,hasMore:i}=this.props,{ptRfresh:a,ptMore:h,duration:c,dy:l}=this.state,u=t().createElement(M,{shouldUpdate:this.shouldUpdateChildren,render:()=>s}),p={transitionDuration:"".concat(c,"ms"),transform:l?"translate3d(0,".concat(l,"px, 0)"):""};return t().createElement("div",{className:o()(e,"m-pull-to-refresh-container"),ref:e=>{this.wrapRef=e},style:r},t().createElement("div",{className:o()("m-pull-to-refresh-body","m-pull-to-refresh-".concat(a)),style:p,ref:e=>{this.bodyRef=e},onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchEnd},t().createElement("div",{className:"m-pull-to-refresh-header",style:{height:n}},t().createElement(v,{status:a})),t().createElement("div",{className:"m-pull-to-refresh-children"},u),t().createElement("div",{className:"m-pull-to-refresh-footer"},t().createElement(T,{status:h,hasMore:i}))))}}S.propTypes={className:a().any,style:a().any,distanceToRefresh:a().number,refresh:a().func,stayTime:a().number,duration:a().number,headerHeight:a().number,hasMore:a().bool,distanceToLoadMore:a().number,loadMore:a().func},S.defaultProps={className:"",style:{},distanceToRefresh:56,refresh:null,stayTime:600,duration:300,headerHeight:56,hasMore:!0,distanceToLoadMore:50,loadMore:null};const x=S})(),n.default})()}));